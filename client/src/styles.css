/* ================== Chatforia App Styles ================== */
/* Consumes tokens from themes.css. No raw hexes for brand areas. */

/* --- CTA & control gradients --- */
:root {
  --cta-gradient: var(--cta-gradient-cool);   /* default = blue→indigo */
  --switch-gradient: var(--cta-gradient);
}
:root[data-theme="midnight"] {
  --cta-gradient: var(--cta-gradient-warm);   /* midnight default = gold→purple */
  --cta-overlay: rgba(0,0,0,0.22);
}
:root[data-theme="midnight"][data-cta="cool"] {
  --cta-gradient: var(--cta-gradient-cool);
  --cta-overlay: transparent;
  --switch-gradient: var(--cta-gradient);
}

/* ================== CTAs / Links / Badges (site-wide) ================== */
.button-primary {
  position: relative;
  background: var(--cta-gradient);
  color: var(--cta-label);
  border: none;
  box-shadow: 0 6px 20px var(--shadow-accent);
  transition: filter .15s ease, box-shadow .15s ease, transform .05s ease;
}
.button-primary::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: var(--cta-overlay, transparent);
  pointer-events: none;
}
.button-primary > * { position: relative; z-index: 1; }
.button-primary:hover { filter: brightness(1.03); }
.button-primary:active { transform: translateY(1px); }

.oauth-button,
.secondary-cta {
  background: var(--card);
  color: var(--accent);
  border: 1px solid var(--border);
  box-shadow: none;
}

a, .link { color: var(--accent); }
a:hover, .link:hover { text-decoration: underline; filter: none; }

.badge-gold {
  background: color-mix(in oklab, var(--brand-gold) 14%, transparent);
  color: color-mix(in oklab, var(--brand-gold) 78%, #111);
  border: 1px solid color-mix(in oklab, var(--brand-gold) 35%, transparent);
}

/* ================== Brand lockup (logo + wordmark) ================== */
.brand-lockup { display: inline-flex; align-items: center; gap: 0.5rem; }
.brand-lockup__logo { width: var(--logo-size, 44px); height: auto; object-fit: contain; }
.brand-lockup__name { font-size: var(--text-size, 24px); margin: 0; line-height: 1; }

.brand-lockup--fixed { position: absolute; inset-block-start: -6px; inset-inline-start: 0; z-index: 2; }
@media (max-width: 62em) { .brand-lockup--fixed { position: static; } }

/* Safety override if an old rule set width directly */
.brand-lockup .logo-chatforia,
.brand-lockup .brand-lockup__logo {
  width: var(--logo-size, 44px) !important;
  height: auto !important;
}

/* ================== Auth background (theme-aware) ================== */
.auth-page {
  min-height: 100vh;
  background:
    radial-gradient(1200px 600px at 10% -10%,
      color-mix(in oklab, var(--brand-blue) 18%, transparent), transparent),
    radial-gradient(900px 500px at 110% 110%,
      color-mix(in oklab, var(--brand-gold) 15%, transparent), transparent);
}
/* Deeper hues on Midnight */
:root[data-theme="midnight"] .auth-page {
  background:
    radial-gradient(1200px 600px at 10% -10%,
      color-mix(in oklab, var(--brand-purple) 24%, transparent), transparent),
    radial-gradient(900px 500px at 110% 110%,
      color-mix(in oklab, var(--brand-gold) 16%, transparent), transparent);
}

/* Gradient text helpers (use CTA so it can animate when cycling is on) */
.text-blue-purple,
.bp-wordmark .brand-lockup__name,
.auth-page .mantine-Anchor-root,
.auth-page a.auth-link-gradient {
  background: var(--cta-gradient);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  -webkit-text-fill-color: transparent;
}
.auth-page .mantine-Anchor-root,
.auth-page a.auth-link-gradient {
  text-decoration: none;
}
.auth-page .mantine-Anchor-root:hover,
.auth-page a.auth-link-gradient:hover {
  text-decoration: underline;
  filter: brightness(1.05);
}

/* Trim transparent padding on logo-blank for alignment */
.auth-hero-lockup .brand-lockup__logo { margin-left: -8px; }

/* Optional midnight test block (kept but token-ized) */
.auth-page--midnight-test {
  background: var(--bg);
  --cta-gradient: var(--cta-gradient-warm);
  --cta-label: #fff;
  --cta-overlay: rgba(0,0,0,0.22);
}

/* ================== App-wide Surfaces & Mantine mapping ================== */
html, body, #root { background: var(--bg); color: var(--fg); }

.mantine-AppShell-root,
.mantine-AppShell-main { background: var(--bg); color: var(--fg); }

/* Side rail / content panels */
.sidebar, .left-rail, .content-panel, .chat-main {
  background: var(--bg);
  color: var(--fg);
  border-color: var(--border);
}

/* Map Mantine base tokens to our theme variables */
:root,
[data-mantine-color-scheme] {
  --mantine-color-body: var(--bg);
  --mantine-color-text: var(--fg);
}

/* AppShell surfaces */
.mantine-AppShell-root,
.mantine-AppShell-main,
.mantine-AppShell-header,
.mantine-AppShell-navbar,
.mantine-AppShell-aside,
.mantine-AppShell-footer,
.mantine-Header-root,
.mantine-Navbar-root,
.mantine-Aside-root,
.mantine-Footer-root {
  background: var(--bg) !important;
  color: var(--fg) !important;
  border-color: var(--border) !important;
}

/* Cards/panels should look like cards, not the page bg */
.mantine-Card-root,
.mantine-Paper-root {
  background: var(--card);
  color: var(--fg);
  border-color: var(--border);
}

/* ================== Switch & Checkbox gradients (global) ================== */
.mantine-Switch-track[data-checked],
.mantine-Switch-track[data-checked="true"] {
  background: var(--switch-gradient) !important;
  border-color: transparent !important;
}
.mantine-Checkbox-input:checked + .mantine-Checkbox-inner {
  background: var(--switch-gradient) !important;
  border-color: transparent !important;
}
.mantine-Checkbox-input:checked + .mantine-Checkbox-inner .mantine-Checkbox-icon { color: #fff; }

/* Robust ON-state selectors (v7) */
.mantine-Switch-root[data-checked] .mantine-Switch-track,
.mantine-Switch-root[data-checked="true"] .mantine-Switch-track,
.mantine-Switch-input:checked ~ .mantine-Switch-track {
  background: var(--switch-gradient) !important;
  border-color: transparent !important;
}
.mantine-Checkbox-input:checked + .mantine-Checkbox-inner {
  background: var(--switch-gradient) !important;
  border-color: transparent !important;
}
.mantine-Checkbox-input:checked + .mantine-Checkbox-inner .mantine-Checkbox-icon {
  color: #fff !important;
}

/* Smooth theme flips; respect reduced motion */
:root, .auth-page,
.mantine-Paper-root, .mantine-TextInput-input, .mantine-PasswordInput-input {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease, box-shadow .25s ease;
}
@media (prefers-reduced-motion: reduce) {
  :root, .auth-page,
  .mantine-Paper-root, .mantine-TextInput-input, .mantine-PasswordInput-input {
    transition: none;
  }
}

/* Hero title always uses readable foreground; gradient stays for accents */
.auth-hero-title { color: var(--fg); }
:root[data-theme="midnight"] .auth-hero-title {
  color: #eef2ff;
  text-shadow: 0 1px 0 rgba(0,0,0,.18);
}

/* Icon chips readable on both themes */
.auth-hero .auth-chip {
  background: var(--cta-gradient);
  color: #fff;
}

/* Optional subtle animated header underline */
.brand-animated {
  background-image: var(--cta-gradient);
  background-size: 200% 100%;
}
:root[data-cycling="on"] .brand-animated {
  animation: chatforia-cycle 14s linear infinite;
}
@media (prefers-reduced-motion: reduce) {
  :root[data-cycling="on"] .brand-animated {
    animation: none;
  }
}
