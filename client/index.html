<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatforia</title>

    <!-- Fonts (Inter for UI, Syne for the big “C”) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;700;800&family=Syne:wght@700;800&display=swap" rel="stylesheet">

    <!-- Favicon (default to warm Dawn) -->
    <link id="cf-favicon" rel="icon" type="image/svg+xml" href="/brand/favicon-dawn.svg">

    <!-- Safari pinned tabs (accent color is the warm amber) -->
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#FFB300">

    <!-- Optional: fallback theme color for some UAs -->
    <meta name="theme-color" content="#FFF7F0" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <!-- Theme-aware favicon swapper (keeps in sync with <html data-theme="...">) -->
    <script>
      (function () {
        const link = document.getElementById('cf-favicon');
        if (!link) return;

        const ICON_BY_THEME = {
          dawn: '/brand/favicon-dawn.svg',
          light: '/brand/favicon-dawn.svg',
          dark: '/brand/favicon-midnight.svg',
          midnight: '/brand/favicon-midnight.svg',
          neon: '/brand/favicon-neon.svg',       // add file when ready
          amoled: '/brand/favicon-neon.svg',     // reuse neon set
          sunset: '/brand/favicon-sunset.svg'    // add file when ready
        };

        let lastHref = null;
        const apply = () => {
          const theme = document.documentElement.getAttribute('data-theme') || 'dawn';
          const next = ICON_BY_THEME[theme] || ICON_BY_THEME.dawn;
          if (next !== lastHref) {
            link.href = next;
            lastHref = next;
          }
        };

        // initial apply + observe attribute changes
        apply();
        new MutationObserver(apply)
          .observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });

        // Also re-apply when system scheme changes (in case app mirrors system)
        const mq = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
        mq && mq.addEventListener && mq.addEventListener('change', apply);
      })();
    </script>
  </body>
</html>
